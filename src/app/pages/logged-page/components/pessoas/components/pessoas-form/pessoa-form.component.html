<div
  class="bg-white rounded-lg shadow overflow-hidden w-full mx-auto max-w-4xl max-h-2xl h-fit"
>
  <div class="px-6 py-8 w-full">
    <div class="h-0.5 bg-[#DEE2E6] w-full relative top-5"></div>
    <div class="flex justify-between items-start max-w-lg mx-auto relative">
      <app-progress-bar
        [step]="1"
        stepTitle="Dados Cadastrais"
        [progress]="getStepProgress(1)"
      >
      </app-progress-bar>

      <app-progress-bar
        [step]="2"
        stepTitle="Dados de contato"
        [progress]="getStepProgress(2)"
      >
      </app-progress-bar>

      <app-progress-bar
        [step]="3"
        stepTitle="Dados de endereço"
        [progress]="getStepProgress(3)"
      >
      </app-progress-bar>
    </div>
  </div>

  <form [formGroup]="personForm" (ngSubmit)="onSubmit()">
    <div class="p-6 space-y-6 overflow-auto">
      @switch (currentStep()) { @case (1) {
      <app-dados-cadastrais
        [formStepGroup]="stepDadosCadastrais"
      ></app-dados-cadastrais>
      } @case (2) {
      <app-contato [formStepGroup]="stepDadosContato"></app-contato>
      } @case (3) {
      <app-endereco [formStepGroup]="stepDadosEndereco"></app-endereco>
      } }
    </div>

    <footer
      class="flex items-center p-6 bg-gray-50 border-t border-gray-200 space-x-4"
      [class.justify-between]="currentStep() > 1"
      [class.justify-end]="currentStep() === 1"
    >
      @if (currentStep() > 1) {
      <button
        type="button"
        (click)="prevStep()"
        class="flex items-center px-5 py-2 bg-primary text-white rounded-md shadow-sm hover:bg-blue-700 cursor-pointer"
      >
        &larr; Anterior
      </button>
      } @if (currentStep() < 3) {
      <button
        type="button"
        (click)="nextStep()"
        class="flex items-center px-5 py-2 bg-primary text-white rounded-md shadow-sm hover:bg-blue-700 cursor-pointer"
      >
        Próximo &rarr;
      </button>
      } @if (currentStep() === 3) {
      <button
        type="submit"
        [disabled]="personForm.invalid"
        class="px-5 py-2 bg-primary text-white rounded-md shadow-sm hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"
      >
        Concluir
      </button>
      }
    </footer>
  </form>
</div>
